<nav class="w-full h-full bg-zinc-900/40 border border-white/5 rounded-[2.5rem] p-8 flex flex-col justify-between backdrop-blur-xl">
    <div>
        <div class="mb-12">
            <h1 class="text-xl font-bold italic tracking-tighter text-white">ALLIED WORK</h1>
            <p id="teamLabel" class="text-[10px] text-indigo-400 font-black uppercase tracking-[0.2em] mt-2">Team Workspace</p>
        </div>

        <div id="nav-primary" class="space-y-2">
            <a href="../dash/dashboard.html" class="nav-link group w-full flex items-center justify-between px-4 py-3 rounded-xl transition text-sm font-medium text-zinc-400 hover:text-white">
                <span>Robot Files</span>
                <div class="indicator w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.8)] opacity-0 transition-opacity"></div>
            </a>

            <a href="../dash/tasks.html" class="nav-link group w-full flex items-center justify-between px-4 py-3 rounded-xl transition text-sm font-medium text-zinc-400 hover:text-white">
                <span>Tasks</span>
                <div class="indicator w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.8)] opacity-0 transition-opacity"></div>
            </a>

            <a href="../dash/scorer.html" class="nav-link group w-full flex items-center justify-between px-4 py-3 rounded-xl transition text-sm font-medium text-zinc-400 hover:text-white">
                <span>Scoring</span>
                <div class="indicator w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.8)] opacity-0 transition-opacity"></div>
            </a>
        </div>
    </div>

    <div class="pt-6 border-t border-white/5">
        <a href="../team/team.html" class="nav-link group w-full flex items-center justify-between px-4 py-3 mb-4 rounded-xl transition text-sm font-medium text-zinc-400 hover:text-white">
            <span>Team Roster</span>
            <div class="indicator w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.8)] opacity-0 transition-opacity"></div>
        </a>

        <div class="flex items-center gap-3">
            <div id="userInitials" class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-[10px] font-bold">--</div>
            <div class="overflow-hidden text-ellipsis">
                <p id="userName" class="text-xs font-bold truncate">User</p>
                <p onclick="logout()" class="text-[10px] text-zinc-500 hover:text-red-400 cursor-pointer transition uppercase font-black tracking-widest">Logout</p>
            </div>
        </div>
    </div>
</nav>

<script>
    (function() {
        // --- 1. HANDLE ACTIVE TABS ---
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link');

        navLinks.forEach(link => {
            const dot = link.querySelector('.indicator');
            // Grabs the filename (e.g., 'scorer.html')
            const targetFile = link.getAttribute('href').split('/').pop();
            const isMatch = currentPath.includes(targetFile);

            if (isMatch) {
                link.classList.add('bg-white/10', 'text-white');
                link.classList.remove('text-zinc-400');
                if(dot) dot.classList.remove('opacity-0'); 
            } else {
                link.classList.remove('bg-white/10', 'text-white');
                link.classList.add('text-zinc-400');
                if(dot) dot.classList.add('opacity-0');
            }
        });

        // --- 2. DISPLAY USER INFO ---
        if (typeof pb !== 'undefined' && pb.authStore.isValid) {
            const user = pb.authStore.model;
            const name = user.name || user.email || "User";
            
            const nameEl = document.getElementById('userName');
            const initialEl = document.getElementById('userInitials');

            if (nameEl) nameEl.textContent = name;
            if (initialEl) initialEl.textContent = name.substring(0, 2).toUpperCase();
        }
    })();
</script>